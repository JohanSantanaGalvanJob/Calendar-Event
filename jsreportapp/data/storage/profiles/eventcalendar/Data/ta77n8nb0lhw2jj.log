{"type":"operationStart","subtype":"profile","data":{"_id":"jFlfy7KH5gCBWBiw","timestamp":"2023-01-26T12:08:48.572Z","state":"queued","mode":"standard","creationDate":"2023-01-26T12:08:48.576Z","modificationDate":"2023-01-26T12:08:48.576Z","shortid":"Otc1H9p","$entitySet":"profiles"},"doDiffs":false,"timestamp":1674734928573,"id":"utlhipg344ze3zr","previousOperationId":null,"operationId":"ls72xf2zmzfbcb7"}
{"type":"log","level":"info","message":"Render request 24 queued for execution and waiting for available worker","previousOperationId":"ls72xf2zmzfbcb7","timestamp":1674734928574,"id":"h3hsn5yj7p7lmle"}
{"type":"operationStart","subtype":"render","name":"Data","previousOperationId":"ls72xf2zmzfbcb7","timestamp":1674734928594,"id":"y3hc8q4lp6aohxx","previousEventId":"utlhipg344ze3zr","operationId":"cfrhbt31dap2dlu"}
{"type":"log","timestamp":1674734928594,"level":"info","message":"Starting rendering request 24","meta":{"rootId":"ta77n8nb0lhw2jj","id":"ta77n8nb0lhw2jj"},"id":"wjsvdt6sy46wakj","previousOperationId":"cfrhbt31dap2dlu"}
{"type":"log","timestamp":1674734928595,"level":"info","message":"Rendering template { name: Data, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"ta77n8nb0lhw2jj","id":"ta77n8nb0lhw2jj"},"id":"7t57o5m2bhu6qcr","previousOperationId":"cfrhbt31dap2dlu"}
{"type":"log","timestamp":1674734928598,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"ta77n8nb0lhw2jj","id":"ta77n8nb0lhw2jj"},"id":"uwkp53c9212dmqw","previousOperationId":"cfrhbt31dap2dlu"}
{"type":"log","timestamp":1674734928610,"level":"debug","message":"Executing script testing (beforeRender)","meta":{"rootId":"ta77n8nb0lhw2jj","id":"ta77n8nb0lhw2jj"},"id":"3hk1d8dpg1vv6w4","previousOperationId":"cfrhbt31dap2dlu"}
{"type":"log","timestamp":1674734928631,"level":"warn","message":"Error when processing render request 24\n(because) error when evaluating custom script /eventcalendar/testing\nmissing ) after argument list\nsandbox.js:21\n    }\n    ^\n\nSyntaxError: missing ) after argument list\n    at new Script (node:vm:100:7)\n    at doCompileScript (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:224:14)\n    at run (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:169:72)\n    at WorkerReporter._runInSandbox (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:180:20)\n    at WorkerReporter.runInSandbox (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:152:17)\n    at async executeScript (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)\n    at async ListenerCollection.fire (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\listenerCollection.js:157:21)\n    at async beforeRender (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:25:5)","meta":{"rootId":"ta77n8nb0lhw2jj","id":"ta77n8nb0lhw2jj"},"id":"qvldtfs0ljnr1c7","previousOperationId":"cfrhbt31dap2dlu"}
{"type":"log","timestamp":1674734928632,"level":"warn","message":"Rendering request 24 finished with error in 60 ms","meta":{"rootId":"ta77n8nb0lhw2jj","id":"ta77n8nb0lhw2jj"},"id":"7yq7fyz98s626s6","previousOperationId":"cfrhbt31dap2dlu"}
{"type":"error","timestamp":1674734928642,"statusCode":400,"weak":true,"entity":{"shortid":"W0gvNctphZ","name":"testing","content":"// Use the \"beforeRender\" or \"afterRender\" hook\n// to manipulate and control the report generation\nconst axios = require('axios');\nconst nodemailer = require('nodemailer')\nvar id = 54;\n\n\n\nasync function beforeRender(req, res) {\n\n     \n    const r = await axios.get(`http://localhost:3000/events/54`)\n    req.data.events = { ...req.data,\n        ...r.data\n    }\n\n    const sos = await axios.get(`http://localhost:3000/chart`).then(response => {\n    const location_id = response.data.location_id;\n    const repetition = response.data.repetition;\n    console.log(location_id)\n    }\n\n\n\n    const s = await axios.get(`http://localhost:3000/events`)\n    req.data.events = { ...req.data,\n        ...s.data\n    }\n\n    const response = await axios.get('http://localhost:3000/locations')\n    req.data.locations = { ...req.data,\n        ...response.data\n    }\n\n    const responseEventType = await axios.get('http://localhost:3000/event_types')\n    req.data.eventType = { ...req.data,\n        ...responseEventType.data\n    }\n\n    // const responseUser = await axios.get('http://localhost:3000/users')    \n    // req.data.user = { ...req.data, ...responseUser.data}\n    // console.log(req.data.user)\n\n\n\n\n}\n\nasync function afterRender(req, res) {\n\n    const transporter = nodemailer.createTransport({\n        host: 'smtp.ethereal.email',\n        port: 587,\n        auth: {\n            user: 'isom26@ethereal.email',\n            pass: 'sQEWpaYJug5tattpkZ'\n        }\n    });\n\n\n    await transporter.sendMail({\n        from: 'jdejohan@gmail.com',\n        to: \"isom26@ethereal.email\",\n        subject: 'CRUD report',\n        text: '...',\n        attachments: [{\n            filename: 'Data.pdf',\n            content: Buffer.from(res.content)\n        }],\n    })\n\n}\n"},"property":"content","logged":true,"previousOperationId":"cfrhbt31dap2dlu","id":"ekscd53bcarquch","stack":"sandbox.js:21\n    }\n    ^\n\nSyntaxError: missing ) after argument list\n    at new Script (node:vm:100:7)\n    at doCompileScript (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:224:14)\n    at run (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:169:72)\n    at WorkerReporter._runInSandbox (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:180:20)\n    at WorkerReporter.runInSandbox (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:152:17)\n    at async executeScript (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)\n    at async ListenerCollection.fire (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\listenerCollection.js:157:21)\n    at async beforeRender (C:\\Users\\Johan\\Desktop\\clases\\Proyecto\\Calendar-Event\\jsreportapp\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:25:5)","message":"Error when evaluating custom script /eventcalendar/testing\nmissing ) after argument list"}
