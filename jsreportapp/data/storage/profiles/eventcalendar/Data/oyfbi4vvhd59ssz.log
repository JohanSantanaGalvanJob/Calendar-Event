{"type":"operationStart","subtype":"profile","data":{"_id":"5KIgjt5NYPU6JJL5","timestamp":"2023-01-25T00:24:17.011Z","state":"queued","mode":"standard","creationDate":"2023-01-25T00:24:17.015Z","modificationDate":"2023-01-25T00:24:17.015Z","shortid":"JoqHem6","$entitySet":"profiles"},"doDiffs":false,"timestamp":1674606257013,"id":"8p8c8t46b1gl0j9","previousOperationId":null,"operationId":"69v870yre9uruvp"}
{"type":"log","level":"info","message":"Render request 19 queued for execution and waiting for available worker","previousOperationId":"69v870yre9uruvp","timestamp":1674606257014,"id":"4zkhk7o7bac8kv4"}
{"type":"operationStart","subtype":"render","name":"Data","previousOperationId":"69v870yre9uruvp","timestamp":1674606257028,"id":"3bclmsvfu2ku0mf","previousEventId":"8p8c8t46b1gl0j9","operationId":"syef9g4jmzw0s61"}
{"type":"log","timestamp":1674606257028,"level":"info","message":"Starting rendering request 19","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"nbhgbc7xrub1hez","previousOperationId":"syef9g4jmzw0s61"}
{"type":"log","timestamp":1674606257028,"level":"info","message":"Rendering template { name: Data, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"u4h80zps6kk7p6y","previousOperationId":"syef9g4jmzw0s61"}
{"type":"log","timestamp":1674606257029,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"bmdgzq6gfnicm77","previousOperationId":"syef9g4jmzw0s61"}
{"type":"log","timestamp":1674606257032,"level":"debug","message":"Executing script testing (beforeRender)","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"2nj0dl5boco890n","previousOperationId":"syef9g4jmzw0s61"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1674606257106,"id":"w4cpl31tbxvws39","previousEventId":"3bclmsvfu2ku0mf","operationId":"pn0egvw5nsxkop9","previousOperationId":"syef9g4jmzw0s61"}
{"type":"operationStart","subtype":"script","name":"scripts testing","previousOperationId":"pn0egvw5nsxkop9","timestamp":1674606257106,"id":"g0ar6d2d2e53fj2","previousEventId":"w4cpl31tbxvws39","operationId":"0rhvxhd7iclowcc"}
{"type":"log","timestamp":1674606257457,"level":"debug","message":"(console:log) {\n  id: 54,\n  title: 'Festival Cine Gáldar',\n  description: 'Este año tenemos el placer de anunciar el Festival de cine de Gáldar un año más donde podremos ver cine de todos los géneros y tipos...',\n  date: '2022-11-02',\n  starting_hour: '15:00',\n  finished_hour: '21:00',\n  url: 'https://ficgaldar.es',\n  created_at: '2022-12-16T20:21:57.613Z',\n  updated_at: '2022-12-16T20:33:25.999Z',\n  location_id: 59,\n  event_type_id: 42,\n  image: 'http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBidz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--4d03c0a42072b5f7f6a32f42e165676d2dde3b17/af-FIC-cartel-MEDIOS-1320x1848.png'\n}","meta":{"userLevel":true,"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"ckayhe4qsi81dh2","previousOperationId":"0rhvxhd7iclowcc"}
{"type":"log","timestamp":1674606257658,"level":"debug","message":"(console:log) {\n  '0': {\n    id: 2,\n    name: 'Teror',\n    created_at: '2022-11-18T17:39:01.973Z',\n    updated_at: '2022-11-18T17:39:01.973Z'\n  },\n  '1': {\n    id: 58,\n    name: 'Las Palmas de Gran Canaria',\n    created_at: '2022-12-16T00:41:37.274Z',\n    updated_at: '2022-12-16T00:41:37.274Z'\n  },\n  '2': {\n    id: 59,\n    name: 'Gáldar',\n    created_at: '2022-12-16T20:22:26.658Z',\n    updated_at: '2022-12-16T20:22:26.658Z'\n  },\n  '3': {\n    id: 60,\n    name: 'La Aldea',\n    created_at: '2022-12-18T22:19:50.503Z',\n    updated_at: '2022-12-18T22:19:50.503Z'\n  },\n  events: {\n    id: 54,\n    title: 'Festival Cine Gáldar',\n    description: 'Este año tenemos el placer de anunciar el Festival de cine de Gáldar un año más donde podremos ver cine de todos los géneros y tipos...',\n    date: '2022-11-02',\n    starting_hour: '15:00',\n    finished_hour: '21:00',\n    url: 'https://ficgaldar.es',\n    created_at: '2022-12-16T20:21:57.613Z',\n    updated_at: '2022-12-16T20:33:25.999Z',\n    location_id: 59,\n    event_type_id: 42,\n    image: 'http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBidz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--4d03c0a42072b5f7f6a32f42e165676d2dde3b17/af-FIC-cartel-MEDIOS-1320x1848.png'\n  }\n}","meta":{"userLevel":true,"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"1ykfn25t4qnlv8o","previousOperationId":"0rhvxhd7iclowcc"}
{"type":"log","timestamp":1674606257862,"level":"debug","message":"(console:log) {\n  '0': {\n    id: 41,\n    name: 'Johan',\n    created_at: '2022-12-16T18:50:23.192Z',\n    updated_at: '2022-12-16T18:50:23.192Z'\n  },\n  '1': {\n    id: 42,\n    name: 'Cine',\n    created_at: '2022-12-16T20:22:41.472Z',\n    updated_at: '2022-12-16T20:22:41.472Z'\n  },\n  '2': {\n    id: 43,\n    name: 'Concierto',\n    created_at: '2022-12-17T17:06:13.824Z',\n    updated_at: '2022-12-17T17:06:13.824Z'\n  },\n  '3': {\n    id: 1,\n    name: 'Navidad',\n    created_at: '2022-11-21T17:09:38.609Z',\n    updated_at: '2022-12-17T17:06:31.249Z'\n  },\n  '4': {\n    id: 44,\n    name: 'Halloween',\n    created_at: '2022-12-18T21:40:13.425Z',\n    updated_at: '2022-12-18T21:40:13.425Z'\n  },\n  '5': {\n    id: 45,\n    name: 'Teatro',\n    created_at: '2022-12-18T21:41:06.719Z',\n    updated_at: '2022-12-18T21:41:06.719Z'\n  },\n  events: {\n    id: 54,\n    title: 'Festival Cine Gáldar',\n    description: 'Este año tenemos el placer de anunciar el Festival de cine de Gáldar un año más donde podremos ver cine de todos los géneros y tipos...',\n    date: '2022-11-02',\n    starting_hour: '15:00',\n    finished_hour: '21:00',\n    url: 'https://ficgaldar.es',\n    created_at: '2022-12-16T20:21:57.613Z',\n    updated_at: '2022-12-16T20:33:25.999Z',\n    location_id: 59,\n    event_type_id: 42,\n    image: 'http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBidz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--4d03c0a42072b5f7f6a32f42e165676d2dde3b17/af-FIC-cartel-MEDIOS-1320x1848.png'\n  },\n  locations: {\n    '0': {\n      id: 2,\n      name: 'Teror',\n      created_at: '2022-11-18T17:39:01.973Z',\n      updated_at: '2022-11-18T17:39:01.973Z'\n    },\n    '1': {\n      id: 58,\n      name: 'Las Palmas de Gran Canaria',\n      created_at: '2022-12-16T00:41:37.274Z',\n      updated_at: '2022-12-16T00:41:37.274Z'\n    },\n    '2': {\n      id: 59,\n      name: 'Gáldar',\n      created_at: '2022-12-16T20:22:26.658Z',\n      updated_at: '2022-12-16T20:22:26.658Z'\n    },\n    '3': {\n      id: 60,\n      name: 'La Aldea',\n      created_at: '2022-12-18T22:19:50.503Z',\n      updated_at: '2022-12-18T22:19:50.503Z'\n    },\n    events: {\n      id: 54,\n      title: 'Festival Cine Gáldar',\n      description: 'Este año tenemos el placer de anunciar el Festival de cine de Gáldar un año más donde podremos ver cine de todos los géneros y tipos...',\n      date: '2022-11-02',\n      starting_hour: '15:00',\n      finished_hour: '21:00',\n      url: 'https://ficgaldar.es',\n      created_at: '2022-12-16T20:21:57.613Z',\n      updated_at: '2022-12-16T20:33:25.999Z',\n      location_id: 59,\n      event_type_id: 42,\n      image: 'http://localhost:3000/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBidz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--4d03c0a42072b5f7f6a32f42e165676d2dde3b17/af-FIC-cartel-MEDIOS-1320x1848.png'\n    }\n  }\n}","meta":{"userLevel":true,"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"pfqnlpv3nm2f27r","previousOperationId":"0rhvxhd7iclowcc"}
{"type":"operationEnd","operationId":"0rhvxhd7iclowcc","timestamp":1674606257862,"id":"x56xjhr1n7u32fy","previousEventId":"3bclmsvfu2ku0mf","previousOperationId":"syef9g4jmzw0s61"}
{"type":"operationEnd","operationId":"pn0egvw5nsxkop9","timestamp":1674606257862,"id":"fx1116un8hgx02w","previousEventId":"x56xjhr1n7u32fy","previousOperationId":"syef9g4jmzw0s61"}
{"type":"log","timestamp":1674606257862,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"26rb1lntssywdnv","previousOperationId":"pn0egvw5nsxkop9"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1674606257862,"id":"0k0lahqwp6x20of","previousEventId":"fx1116un8hgx02w","operationId":"bmt2bpc9gw17dq6","previousOperationId":"pn0egvw5nsxkop9"}
{"type":"log","timestamp":1674606257862,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"zz58oz14dgikwji","previousOperationId":"bmt2bpc9gw17dq6"}
{"type":"operationEnd","operationId":"bmt2bpc9gw17dq6","timestamp":1674606257894,"id":"g8joly164988999","previousEventId":"0k0lahqwp6x20of","previousOperationId":"bmt2bpc9gw17dq6"}
{"type":"operationStart","subtype":"recipe","name":"chrome-pdf","timestamp":1674606257895,"id":"sdbq6nbltnxa65i","previousEventId":"g8joly164988999","operationId":"him9ijf7wjwqrf7","previousOperationId":"bmt2bpc9gw17dq6"}
{"type":"log","timestamp":1674606257895,"level":"debug","message":"Executing recipe chrome-pdf","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"k4yonzkeqzdq8bn","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606257899,"level":"debug","message":"Converting with chrome HeadlessChrome/105.0.5173.0 using chrome-pool strategy","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"ioihjfyvkr23qxn","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258026,"level":"debug","message":"Page request: GET (document) file:///C:/Users/Johan/AppData/Local/Temp/jsreport/autocleanup/ffc08a52-033d-4e3e-aa53-65d91e79f896-chrome-pdf.html","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"ogjuuanstxrpfyu","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258049,"level":"debug","message":"Page request finished: GET (document) 200 file:///C:/Users/Johan/AppData/Local/Temp/jsreport/autocleanup/ffc08a52-033d-4e3e-aa53-65d91e79f896-chrome-pdf.html","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"jvu60sek05beb28","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258049,"level":"debug","message":"Page request: GET (stylesheet) https://cdnjs.cloudflare.com/ajax/libs/metro/4.1.5/css/metro.min.css","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"o5a4n2s1682ge11","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258049,"level":"debug","message":"Page request: GET (script) https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"r2xte8pe6rapf4x","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258059,"level":"debug","message":"Page request finished: GET (script) 200 https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"sht6o7di3j9ht2b","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258082,"level":"debug","message":"Page request finished: GET (stylesheet) 200 https://cdnjs.cloudflare.com/ajax/libs/metro/4.1.5/css/metro.min.css","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"3txjx6dnyj7pvra","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258144,"level":"debug","message":"Running chrome with params {\"printBackground\":true,\"timeout\":59114,\"margin\":{}}","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"lmihqeoui1bg8nw","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"operationEnd","operationId":"him9ijf7wjwqrf7","timestamp":1674606258285,"id":"sioac57kjw0j1d0","previousEventId":"sdbq6nbltnxa65i","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"log","timestamp":1674606258286,"level":"debug","message":"Executing script testing (afterRender)","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"lg3ep8993r57omy","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"operationStart","subtype":"scriptsAfterRender","name":"scripts afterRender","timestamp":1674606258297,"id":"d3y4ql4zj3qd22q","previousEventId":"sioac57kjw0j1d0","operationId":"i25t61a9sldevnd","previousOperationId":"him9ijf7wjwqrf7"}
{"type":"operationStart","subtype":"script","name":"scripts testing","previousOperationId":"i25t61a9sldevnd","timestamp":1674606258297,"id":"ws1ie3ij4vrrdfb","previousEventId":"d3y4ql4zj3qd22q","operationId":"rnw74p6g3yg80ao"}
{"type":"log","timestamp":1674606258639,"level":"warn","message":"Error when processing render request 19\n(because) error when evaluating custom script /eventcalendar/testing\nread ECONNRESET\nError: read ECONNRESET\n    at TCP.onStreamRead (node:internal/stream_base_commons:217:20)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"e1zfhbgvfrc1jzb","previousOperationId":"rnw74p6g3yg80ao"}
{"type":"log","timestamp":1674606258639,"level":"warn","message":"Rendering request 19 finished with error in 1628 ms","meta":{"rootId":"oyfbi4vvhd59ssz","id":"oyfbi4vvhd59ssz"},"id":"t6td8b8qy6smfg0","previousOperationId":"rnw74p6g3yg80ao"}
{"type":"error","timestamp":1674606258644,"errno":-4077,"code":"ESOCKET","syscall":"read","command":"CONN","statusCode":400,"weak":true,"entity":{"shortid":"W0gvNctphZ","name":"testing","content":"// Use the \"beforeRender\" or \"afterRender\" hook\n// to manipulate and control the report generation\nconst axios = require('axios');\nconst nodemailer = require('nodemailer')\nvar id = 54;\n\nasync function beforeRender(req, res) {\n    const r = await axios.get(`http://localhost:3000/events/${id}`)\n    req.data.events = { ...req.data,\n        ...r.data\n    }\n    console.log(req.data.events)\n\n    const response = await axios.get('http://localhost:3000/locations')\n    req.data.locations = { ...req.data,\n        ...response.data\n    }\n    console.log(req.data.locations)\n\n    const responseEventType = await axios.get('http://localhost:3000/event_types')\n    req.data.eventType = { ...req.data,\n        ...responseEventType.data\n    }\n    console.log(req.data.eventType)\n\n    // const responseUser = await axios.get('http://localhost:3000/users')    \n    // req.data.user = { ...req.data, ...responseUser.data}\n    // console.log(req.data.user)\n\n\n\n\n}\n\nasync function afterRender(req, res) {\n    const transporter = nodemailer.createTransport({\n        host: 'smtp.ethereal.email',\n        port: 587,\n        auth: {\n            user: 'isom26@ethereal.email',\n            pass: 'sQEWpaYJug5tattpkZ'\n        }\n    });\n\n\n    await transporter.sendMail({\n        from: 'jdejohan@gmail.com',\n        to: \"isom26@ethereal.email\",\n        subject: 'CRUD report',\n        text: '...',\n        attachments: [{\n            filename: 'Data.pdf',\n            content: Buffer.from(res.content)\n        }],\n    })\n\n}"},"property":"content","logged":true,"previousOperationId":"rnw74p6g3yg80ao","id":"6os0fxegwveitk9","stack":"Error: read ECONNRESET\n    at TCP.onStreamRead (node:internal/stream_base_commons:217:20)\n    at TCP.callbackTrampoline (node:internal/async_hooks:130:17)","message":"Error when evaluating custom script /eventcalendar/testing\nread ECONNRESET"}
